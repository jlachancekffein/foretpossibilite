title = "forest"
url = "/nosforets"
is_hidden = 0
layout = "default"

[viewBag]
localeUrl[en] = "/forest"

[localePicker]
forceUrl = 1
==
<?php
use RainLab\Translate\Classes\Translator;

function onStart()
{
    $this['pageClass'] = 'page-nosforets';

    $this->translator = Translator::instance();
    $locale = $this->translator->getLocale();

    if ($locale == "fr") {
        $this['header'] = [
          'intro' => 'Plus vertes que jamais, nos forêts sont source de fierté et d’innovations.
          Elles représentent près de 50 % de notre territoire et méritent 100 % de notre appui.',
          'more' => 'En savoir plus'
        ];

        $this['statement'] = [
          'title' => 'NOS FORÊTS,<br>NOTRE FORCE COLLECTIVE',
          'description' => '
          Nous sommes plus de 50 organisations d’horizons diversifiés, enracinées sur tout le territoire québécois.<br><br>
          Nous sommes des témoins privilégiés de la vitalité et de la diversité des possibilités qu’offrent nos forêts.<br><br>
          Nous reconnaissons que l’aménagement de nos forêts est ancré dans les principes du développement durable, afin d’offrir aux générations de demain les avantages environnementaux, économiques et sociaux qu’elles procurent.<br><br>
          Nous constatons que nos forêts sont partagées respectueusement entre ses différents usagers.<br><br>
          Nous sommes emballés par le consensus scientifique selon lequel nos forêts et les produits qu’elles nous permettent de développer sont avantageux pour améliorer le bilan carbone mondial.<br><br>
          Nous sommes engagés pour que nos forêts jouent un rôle encore plus grand, au service de la collectivité québécoise.<br><br>
          Nous nous unissons au bénéfice des forêts québécoises.<br><br>
          Nos forêts, nous y croyons.<br><br>
          Nous sommes le Collectif pour une forêt durable.<br><br>'
        ];

        $this['ambassador'] = [
          'title' => 'Découvrez les multiples visages du Collectif pour une forêt durable'
        ];

        $this['facts'] = [
          'header' => [
            'why' => 'Pourquoi y croire ?',
            'know' => 'Saviez-vous que...'
          ],
          'card1' => [
            'label' => 'Près de 50 % du territoire québécois est recouvert de forêt'
          ],
          'card2' => [
            'label' => 'Moins de 1 % du territoire forestier est récolté chaque année'
          ],
          'card3' => [
            'label' => '80 % des forêts se régénèrent naturellement'
          ]
        ];

        $this['quiz'] = [
          'knowledge' => [
            'title' => 'Vérifiez vos connaissances!',
            'description' => 'Êtes-vous un bûcheron dans l’âme ou plutôt un forestier de salon?  Testez votre niveau de connaissance de la forêt québécoise avec ces miniquiz!'
          ],
          'button' => [
            'label' => 'Faites le test'
          ]
        ];

    } else if ($locale == "en") {
      $this['header'] = [
        'intro' => 'Plus vertes que jamais, nos forêts sont source de fierté et d’innovations.
        Elles représentent près de 50 % de notre territoire et méritent 100 % de notre appui.',
        'more' => 'En savoir plus'
      ];

      $this['statement'] = [
        'title' => 'NOS FORÊTS,<br>NOTRE FORCE COLLECTIVE',
        'description' => '
        Nous sommes plus de 50 organisations d’horizons diversifiés, enracinées sur tout le territoire québécois.<br><br>
        Nous sommes des témoins privilégiés de la vitalité et de la diversité des possibilités qu’offrent nos forêts.<br><br>
        Nous reconnaissons que l’aménagement de nos forêts est ancré dans les principes du développement durable, afin d’offrir aux générations de demain les avantages environnementaux, économiques et sociaux qu’elles procurent.<br><br>
        Nous constatons que nos forêts sont partagées respectueusement entre ses différents usagers.<br><br>
        Nous sommes emballés par le consensus scientifique selon lequel nos forêts et les produits qu’elles nous permettent de développer sont avantageux pour améliorer le bilan carbone mondial.<br><br>
        Nous sommes engagés pour que nos forêts jouent un rôle encore plus grand, au service de la collectivité québécoise.<br><br>
        Nous nous unissons au bénéfice des forêts québécoises.<br><br>
        Nos forêts, nous y croyons.<br><br>
        Nous sommes le Collectif pour une forêt durable.<br><br>'
      ];

      $this['ambassador'] = [
        'title' => 'Découvrez les multiples visages du Collectif pour une forêt durable'
      ];

      $this['facts'] = [
        'header' => [
          'why' => 'Pourquoi y croire ?',
          'know' => 'Saviez-vous que...'
        ],
        'card1' => [
          'label' => 'Près de 50 % du territoire québécois est recouvert de forêt'
        ],
        'card2' => [
          'label' => 'Moins de 1 % du territoire forestier est récolté chaque année'
        ],
        'card3' => [
          'label' => '80 % des forêts se régénèrent naturellement'
        ]
      ];

      $this['quiz'] = [
        'knowledge' => [
          'title' => 'Vérifiez vos connaissances!',
          'description' => 'Êtes-vous un bûcheron dans l’âme ou plutôt un forestier de salon?  Testez votre niveau de connaissance de la forêt québécoise avec ces miniquiz!'
        ],
        'button' => [
          'label' => 'Faites le test'
        ]
      ];

    }
}
?>
==

{% set imgPath = '/themes/cifq/assets/public/images' %}

<link href="/themes/cifq/assets/compiled/foret.css" rel="stylesheet">
<div id="page-nosforets">

    <div class="header" style="background-image: url('{{ imgPath }}/new_header_home.png')">
        <div class="container">
            <div class="row">
                <div class="grid-full">
                    <div class="signature">
                        <img src="{{ imgPath }}/forest-title.png" />
                    </div>

                    <div class="intro">
                        <p>{{ header.intro }}</p>
                    </div>
                </div>
            </div>

        </div>

        <div class="mouse-scroll">
            <div><img src="{{ imgPath }}/mouse-scroll.png" class="scroll" /></div>
            <span>{{ header.more }}</span>
        </div>
    </div>

    <div class="content intro" style="background-image: url('{{ imgPath }}/foret-intro-pattern.jpg')">
        <div class="container">
            <div class="grid-full intro">
                <h1>{{ statement.title|raw }}</h1>
                <p>{{ statement.description|raw  }}<br>
                <img class="collectif-logo" src="{{ imgPath }}/collectif.png" />
            </div>
        </div>
    </div>

    <div class="content before-form">
        <div class="container">
            <div class="grid-full">
                <p>{{ ambassador.title }}</p>
            </div>
        </div>
        <div class="arrow-down"></div>
    </div>

    <div class="content form" style="background-image: url('{{ imgPath }}/forest-bloc/forest.png')">
        <div class="container">
            <div class="row why-container">
              <div class="grid-third">
                <span class="why">{{ facts.header.why }}</span>
              </div>
              <div class="grid-third line">
              </div>
              <div class="grid-third">
                <span class="know-that">{{ facts.header.know }}</span>
              </div>
            </div>
            <div class="row">

              <div class="grid-third">
                  <div class="signature">
                      <img src="{{ imgPath }}/forest-bloc/forest-card-1.png" />
                  </div>

                  <div class="intro ">
                      <p>{{ facts.card1.label }}</p>
                  </div>
              </div>

              <div class="grid-third">
                  <div class="signature">
                      <img src="{{ imgPath }}/forest-bloc/forest-card-2.png" />
                  </div>

                  <div class="intro">
                      <p>{{ facts.card2.label }}</p>
                  </div>
              </div>

              <div class="grid-third">
                  <div class="signature">
                      <img src="{{ imgPath }}/forest-bloc/forest-card-3.png" />
                  </div>

                  <div class="intro">
                      <p>{{ facts.card3.label }}</p>
                  </div>
              </div>

            </div>
        </div>
    </div>

    <div class="content green-block">
        <div class="container">
          <div class="grid-third">
              <img src="{{ imgPath }}/quiz/icon.png" alt="">
          </div>

          <div class="grid-third green-block-knowledge">
              <h1>{{ quiz.knowledge.title }}</h1>
              <p>{{ quiz.knowledge.description }}</p>
          </div>

          <div class="grid-third green-block-quiz-wrapper">
              <div class="quiz-btn">
                <a href="https://uneforetdepossibilites.com/fr/conservation-des-forets-et-de-la-nature/quiz-sur-la-sylviculture" target="_blank">
                  <span class="quiz-btn-text">{{ quiz.button.label }}</span>
                  <img src="{{ imgPath }}/quiz/arrow.png" alt="">
                </a>
              </div>
          </div>
        </div>
    </div>

</div>


<script>

    (function(){

        var formContainer = document.querySelector('.content.form');
        var uploadBtnTriggerer = formContainer.querySelector('.btn-upload');
        var uploadInput = formContainer.querySelector('.form-field-photo input');
        var formStep1 = formContainer.querySelector('.form-step[data-step="1"]');
        var formStep2 = formContainer.querySelector('.form-step[data-step="2"]');
        var submitBtnStep1 = formStep1.querySelector('.submit-btn');
        var formStep1Inputs = formStep1.querySelectorAll('input');
        var submitTriggerBtn = formContainer.querySelector('.submit-confirm-btn');
        var form = formContainer.querySelector('form');

        uploadBtnTriggerer.addEventListener('click', function(e){
            e.preventDefault();
            uploadInput.click();
        })

        submitBtnStep1.addEventListener('click', function(e){
            e.preventDefault();

            if (valideForm(1)){
                formStep1.dataset.active = 0;
                formStep2.dataset.active = 1;
            }


        })

        submitTriggerBtn.addEventListener('click', function(e){
            e.preventDefault();
            if (valideForm(2)){
                form.submit();
            }

        })

        // Step 1 remove error class on input focus
        for (i=0; i<formStep1Inputs.length; i++){
            var elm = formStep1Inputs[i];
            elm.addEventListener('focus', function(){
                this.closest('.input').classList.remove('-error');
            })
        }

        // Step 2 remove error class
        formStep2.querySelector('textarea').addEventListener('focus', function(){
            this.classList.remove('-error');
        })
        formStep2.querySelector('.btn-upload').addEventListener('click', function(){
            this.classList.remove('-error');
        })
        formStep2.querySelector('[name="upload-file-legal"]').addEventListener('change', function(){
            this.closest('.control').classList.remove('-error');
        })



        function valideForm(step){

            var isValid = true;

            if (step === 1){

                var firstname = formStep1.querySelector('[name="firstname"]');
                var lastname = formStep1.querySelector('[name="lastname"]');
                var email = formStep1.querySelector('[name="email"]');

                if (!firstname.value.trim().length){
                    firstname.closest('.input').classList.add('-error');
                    isValid = false;
                }

                if (!lastname.value.trim().length){
                    lastname.closest('.input').classList.add('-error');
                    isValid = false;
                }
                if (!validateEmail(email.value)){
                    email.closest('.input').classList.add('-error');
                    isValid = false;
                }



            }

            if (step === 2){
                var legal = formStep2.querySelector('[name="upload-file-legal"]');
                var photo = formStep2.querySelector('[name="photo"]');
                var testimonials = formStep2.querySelector('[name="testimonials"]');


                if (!legal.checked){
                    legal.closest('.control').classList.add('-error');
                    isValid = false;
                }

                if (!photo.value.trim().length){
                    formStep2.querySelector('.btn-upload').classList.add('-error');
                    isValid = false;
                }

                if (!testimonials.value.trim().length){
                    testimonials.classList.add('-error');
                    isValid = false;
                }



            }

            return isValid;

        }

        function validateEmail(email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(String(email).toLowerCase());
        }


    })();





</script>
